<link href="../css/plugins/dropzone/basic.css" rel="stylesheet">
<link href="../css/plugins/dropzone/dropzone.css" rel="stylesheet">

<div class="modal-dialog modal-lg">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title">Modal title</h4>
            <small class="font-bold">Lorem Ipsum is simply dummy text of the printing and typesetting industry.</small>
        </div>
        <div class="modal-body">

            <form class="dropzone" action="#">
                <div class="dropzone-previews"></div>
                <button type="submit" class="btn btn-primary pull-right">Submit this form!</button>
            </form>

        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-white" data-dismiss="modal">Ok</button>
            <!--<button type="button" class="btn btn-primary">Save changes</button>-->
        </div>
    </div>
</div>

<!-- DROPZONE -->
<script src="../js/plugins/dropzone/dropzone.js"></script>

<script>

    $(".dropzone").dropzone({
        url: localIp + "FruitManager/uploadImg.do",
        headers:{"id":sessionStorage.currentFruitId},
        acceptedFiles: ".mp4,.jpg,.png,.jpeg",
        autoProcessQueue: false,
        uploadMultiple: true,
        maxFiles: 8,
        maxFilesize: 5,
        addRemoveLinks: true,
        parallelUploads: 2,

        // Dropzone settings
        init: function() {
            var myDropzone = this;

//            console.log(this);

            this.element.querySelector("button[type=submit]").addEventListener("click", function(e) {
                e.preventDefault();
                e.stopPropagation();
                myDropzone.processQueue();
            });
            this.on("sendingmultiple", function() {
            });
            this.on("successmultiple", function(files, response) {
                jump("store_detail", "store");
            });
            this.on("errormultiple", function(files, response) {
            });
        }
    });
</script>

